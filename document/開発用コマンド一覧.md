# 開発用コマンド一覧

このプロジェクトでは、複数の方法で便利な開発用コマンドを使用できます。

## 目次

1. [Makefile を使用](#makefile-を使用)
2. [バッチファイルを使用](#バッチファイルを使用windows)
3. [PowerShell スクリプトを使用](#powershell-スクリプトを使用windows)
4. [VS Code タスクを使用](#vs-code-タスクを使用)
5. [カスタムスクリプトを使用](#カスタムスクリプトを使用)

---

## Makefile を使用

### 前提条件

Windows で Makefile を使用する場合、`make` コマンドが必要です：

- **Git Bash** を使用（Git for Windows に含まれる）
- **Chocolatey** でインストール: `choco install make`
- **Scoop** でインストール: `scoop install make`

### 使用方法

```bash
# ヘルプを表示
make help

# Web Server モードで起動
make web

# Chrome で起動
make web-chrome

# Edge で起動
make web-edge

# ビルドキャッシュをクリア
make clean

# 本番用にビルド
make build-web

# 依存関係をインストール
make install

# Riverpod のコード生成
make generate

# Riverpod のコード生成を監視
make watch

# テストを実行
make test

# コードをフォーマット
make format

# コードを分析
make analyze
```

### 利点

- ✅ シンプルで覚えやすい
- ✅ 業界標準
- ✅ クロスプラットフォーム

---

## バッチファイルを使用（Windows）

### 簡易版: run-web.bat

プロジェクトルートから直接実行：

```cmd
# Web Server モードで起動
run-web.bat
```

または、ダブルクリックで実行可能。

### 高機能版: scripts\dev.bat

複数のコマンドをサポート：

```cmd
# Web Server モードで起動
scripts\dev.bat web

# Chrome で起動
scripts\dev.bat chrome

# Edge で起動
scripts\dev.bat edge

# ビルドキャッシュをクリア
scripts\dev.bat clean

# 本番用にビルド
scripts\dev.bat build

# 依存関係をインストール
scripts\dev.bat install

# Riverpod のコード生成
scripts\dev.bat generate

# Riverpod のコード生成を監視
scripts\dev.bat watch

# ヘルプを表示
scripts\dev.bat help
```

### 利点

- ✅ Windows ネイティブ
- ✅ 追加インストール不要
- ✅ ダブルクリックで実行可能

---

## PowerShell スクリプトを使用（Windows）

### 簡易版: run-web.ps1

```powershell
# Web Server モードで起動
.\run-web.ps1
```

### 高機能版: scripts\dev.ps1

```powershell
# Web Server モードで起動
.\scripts\dev.ps1 web

# Chrome で起動
.\scripts\dev.ps1 chrome

# Edge で起動
.\scripts\dev.ps1 edge

# ビルドキャッシュをクリア
.\scripts\dev.ps1 clean

# 本番用にビルド
.\scripts\dev.ps1 build

# 依存関係をインストール
.\scripts\dev.ps1 install

# Riverpod のコード生成
.\scripts\dev.ps1 generate

# Riverpod のコード生成を監視
.\scripts\dev.ps1 watch

# ヘルプを表示
.\scripts\dev.ps1 help
```

### PowerShell 実行ポリシーの設定

初回実行時にエラーが出る場合：

```powershell
# 実行ポリシーを確認
Get-ExecutionPolicy

# 実行ポリシーを変更（管理者権限が必要）
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 利点

- ✅ 豊富な機能
- ✅ カラー出力
- ✅ Windows の標準シェル

---

## VS Code タスクを使用

### 使用方法

VS Code でプロジェクトを開いている場合：

1. **`Ctrl + Shift + P`** を押す
2. "**Tasks: Run Task**" を選択
3. 実行したいタスクを選択：
   - `Flutter: Web Server で起動`
   - `Flutter: Chrome で起動`
   - `Flutter: Edge で起動`
   - `Flutter: Clean`
   - `Flutter: Web をビルド`
   - `Flutter: 依存関係をインストール`
   - `Flutter: コード生成（Riverpod）`
   - `Flutter: コード生成を監視（Riverpod）`

### ショートカットキーの設定（オプション）

`.vscode/keybindings.json` を作成（または編集）：

```json
[
  {
    "key": "ctrl+shift+w",
    "command": "workbench.action.tasks.runTask",
    "args": "Flutter: Web Server で起動"
  }
]
```

### 利点

- ✅ IDE 統合
- ✅ ショートカットキー対応
- ✅ 複数タスクの管理が容易

---

## カスタムスクリプトを使用

### エイリアスの設定（PowerShell）

PowerShell プロファイルを編集：

```powershell
# プロファイルを開く
notepad $PROFILE
```

以下を追加：

```powershell
# Flutter プロジェクト用のエイリアス
function fweb { flutter run -d web-server --web-port=8080 }
function fchrome { flutter run -d chrome }
function fedge { flutter run -d edge }
function fclean { flutter clean; flutter pub get }
function fbuild { flutter build web --release }
function fgen { dart run build_runner build --delete-conflicting-outputs }
function fwatch { dart run build_runner watch --delete-conflicting-outputs }
```

保存後、PowerShell を再起動して使用：

```powershell
# Web Server モードで起動
fweb

# ビルドキャッシュをクリア
fclean
```

### Git Bash でのエイリアス設定

`~/.bashrc` または `~/.bash_profile` を編集：

```bash
# Flutter プロジェクト用のエイリアス
alias fweb='flutter run -d web-server --web-port=8080'
alias fchrome='flutter run -d chrome'
alias fedge='flutter run -d edge'
alias fclean='flutter clean && flutter pub get'
alias fbuild='flutter build web --release'
alias fgen='dart run build_runner build --delete-conflicting-outputs'
alias fwatch='dart run build_runner watch --delete-conflicting-outputs'
```

### 利点

- ✅ 最も短いコマンド
- ✅ グローバルで使用可能
- ✅ カスタマイズ性が高い

---

## 推奨される使用方法

### 日常の開発作業

| 環境 | 推奨方法 | コマンド例 |
| ---- | -------- | ---------- |
| VS Code ユーザー | VS Code タスク | `Ctrl+Shift+P` → タスク実行 |
| PowerShell ユーザー | PowerShell スクリプト | `.\scripts\dev.ps1 web` |
| コマンドライン好き | Makefile または エイリアス | `make web` または `fweb` |
| 初心者 | バッチファイル | ダブルクリック `run-web.bat` |

### チーム開発

チームで開発する場合は、**Makefile** または **npm scripts** の使用を推奨：

- クロスプラットフォーム対応
- 標準的な方法
- ドキュメント化しやすい

---

## よく使うコマンドの比較表

| 操作 | Makefile | バッチ | PowerShell | VS Code |
| ---- | -------- | ------ | ---------- | ------- |
| Web Server 起動 | `make web` | `scripts\dev.bat web` | `.\scripts\dev.ps1 web` | タスク選択 |
| Chrome 起動 | `make web-chrome` | `scripts\dev.bat chrome` | `.\scripts\dev.ps1 chrome` | タスク選択 |
| クリーン | `make clean` | `scripts\dev.bat clean` | `.\scripts\dev.ps1 clean` | タスク選択 |
| ビルド | `make build-web` | `scripts\dev.bat build` | `.\scripts\dev.ps1 build` | タスク選択 |
| コード生成 | `make generate` | `scripts\dev.bat generate` | `.\scripts\dev.ps1 generate` | タスク選択 |

---

## トラブルシューティング

### make コマンドが見つからない

**Windows の場合:**

1. Git Bash を使用
2. または Chocolatey でインストール:
   ```cmd
   choco install make
   ```

### PowerShell スクリプトが実行できない

実行ポリシーを変更：

```powershell
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### バッチファイルが動作しない

1. プロジェクトルートディレクトリにいることを確認
2. Flutter がインストールされていることを確認:
   ```cmd
   flutter --version
   ```

### VS Code タスクが表示されない

1. `.vscode/tasks.json` が存在することを確認
2. VS Code を再起動
3. プロジェクトをワークスペースとして開いていることを確認

---

## カスタマイズ方法

### ポート番号を変更

すべてのスクリプトで `8080` を別のポート番号に変更：

1. `Makefile` の `--web-port=8080`
2. `scripts/dev.bat` の `--web-port=8080`
3. `scripts/dev.ps1` の `--web-port=8080`
4. `.vscode/tasks.json` の `"--web-port=8080"`

### 新しいコマンドを追加

例: テスト実行コマンドを追加

**Makefile:**

```makefile
test:
	flutter test
```

**scripts/dev.bat:**

```batch
:test
flutter test
goto end
```

**scripts/dev.ps1:**

```powershell
function Run-Tests {
    flutter test
}

# switch 文に追加
"test" { Run-Tests }
```

---

## まとめ

このプロジェクトでは、複数の方法で開発用コマンドを実行できます：

1. **最も簡単**: `run-web.bat` をダブルクリック
2. **最も短い**: エイリアス設定して `fweb`
3. **最も標準的**: `make web`
4. **最も統合的**: VS Code タスク

自分の作業スタイルに合った方法を選択してください！

